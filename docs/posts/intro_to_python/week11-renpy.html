<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Qingsen Zhang">
<meta name="description" content="The Ren’py script file shows the instructions in Ren’py">

<title>Blogs - 11 Ren’py</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Blogs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://zhangqingsen.github.io/Blogs/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page">
      <h1 class="title">11 Ren’py</h1>
                  <div>
        <div class="description">
          The Ren’py script file shows the instructions in Ren’py
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Qingsen Zhang </p>
            </div>
    </div>
      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block column-page" id="quarto-document-content">




<section id="script.rpy-in-renpy" class="level3">
<h3 class="anchored" data-anchor-id="script.rpy-in-renpy">script.rpy in Ren’py</h3>
<p>Notice that at the time this course was teaching, the lastest version of Ren’py is 7.4, which is the last version using Python 2.7. Then, they shifted to Ren’py 8.0, which using Python 3.</p>
<p>#| code-fold: true #| eval: false # 游戏的脚本可置于此文件中。 init python: # init python 语句在初始化阶段运行，早于其他游戏资源加载。 pass # import numpy as np</p>
</section>
<section id="声明此游戏使用的角色颜色参数可使角色姓名着色" class="level1">
<h1>声明此游戏使用的角色。颜色参数可使角色姓名着色。</h1>
<p>define author = Character(“张晴森”, color=‘#7955d1’) define abc = Character(“abc123”)</p>
</section>
<section id="游戏在此开始" class="level1">
<h1>游戏在此开始。</h1>
<p>label start:</p>
<pre><code># 显示一个背景。此处默认显示占位图，但您也可以在图片目录添加一个文件
# （命名为“bg room.png”或“bg room.jpg”）来显示。
"在script中仅有字符串时为无角色对话"

abc "上面定义了角色abc123，角色名加字符串为简单对话"
author "上面定义了角色{b}{i}{size=45}{alpha=0.7}{color=#7955d1}张晴森{/color}{/alpha}{/size}{/i}{/b}，角色名显示为所设置的颜色"

"文字标签"
# https://www.renpy.cn/doc/text.html
"用 \{size\} 标签设置文字大小"
"如{size=45}abc123{/size}和{size=15}abc123{/size}"
"用 \{color\} 标签设置文字颜色"
"如{color=#7955d1}abc123{/color}和{color=#86aa2e}abc123{/color}"
"用 \{alpha\} 标签设置文字透明度"
"如{alpha=0.5}abc123{/alpha}"
"用 \{s\} 标签设置文字粗体"
"如{s}删除线{/s}"
"用 \{b\} 标签设置文字粗体"
"如{b}bold{/b}"
"用 \{i\} 标签设置文字斜体"
"如{i}italic{/i}"
"结合使用"
"如{b}{size=45}{alpha=0.7}{color=#7955d1}abc123{/color}{/alpha}{/size}{/b}和{i}{size=15}{alpha=0.3}{color=#86aa2e}abc123{/alpha}{/size}{/i}"

"显示背景"
scene bg win
"使用scence显示背景，bg win可以是'bg win.jpg'或者'bg win.png'或者其他图像格式"

# 显示角色立绘。此处使用了占位图，但您也可以在图片目录添加命名为
# “eileen happy.png”的文件来将其替换掉。
"显示人物图像"
show eileen happy
"{i}show eileen happy{/i}"
"未提前定义的图片也可直接通过'show'引用"
"RenPy 会自动去 Images 文件夹搜索 'eileen happy'.jpg/.png等"

# 此处显示各行对话。
define e = Character("艾琳", image="eileen", color='#e3b4b8')
image eileen concerned = "character/eileen concerned.png"           # 路径为: '.\images\character\xxx.jpg' images省略，默认从images搜索图片
image side eileen concerned = "character/side eileen concerned.png" # side设置头像
image eileen happy = "character/eileen happy.png"
image side eileen happy = "character/side eileen happy.png"
image eileen vhappy = "character/eileen vhappy.png"
image side eileen vhappy = "character/side eileen vhappy.png"

e "定义角色\{艾琳\}，同时定义其图片"
e concerned "艾琳 {b}concerned{/b}"
e happy "艾琳 {b}happy{/b}"
e vhappy "艾琳 {b}very happy{/b}"
e "可以看到头像随人物图像的变动而变动"

e "语音"
voice "audio/D12_945.wav"
e "此外，鲨鱼，鱼龙和海豚仅管外貌上很相似，都擅长游泳，有人把它们归属鱼类"
e "具体参考 https://www.renpy.cn/doc/voice.html"

hide eileen
"使用hide来隐藏图像，达到角色退场的效果"
"注意是hide图像eileen，而不是hide角色e"
e concerned "角色退场后说话"
show eileen happy
e "重新展示角色"

scene bg blank with fade
# region 转场特效
    # None 无转场特效
    # fade          0.5秒时间画面逐渐暗淡至全黑，然后0.5秒时间画面从全黑逐渐变亮成新界面。
    # dissolve      0.5秒时间，使用溶解效果从旧界面切到新界面。
    # pixellate     0.5秒像素化旧场景，并0.5秒反向像素化至新场景。
    # move          通过在图像上移动位置切换场景。
    # moveinright   从界面上对应的边界移入图像，用时0.5秒。(moveinleft, moveintop, moveinbottom)
    # moveoutright  从界面上对应的边界移出图像，用时0.5秒。(moveoutleft, moveouttop, moveoutbottom)
    # ease          类似于上面的move系列转场效果，差别在于ease系列基于余弦曲线放缓开始和结束的转场。(easeinright, easeinleft, easeintop, easeinbottom, easeoutright, easeoutleft, easeouttop, easeoutbottom)
    # zoomin        镜头放大切入图像，耗时0.5秒。
    # zoomout       镜头缩小离开图像，耗时0.5秒。
    # zoominout     先镜头放大切入图像，然后镜头缩小离开图像，耗时0.5秒。
    # vpunch        这种转场效果，会垂直摇晃界面0.25秒。
    # hpunch        这种转场效果，会水平摇晃界面0.25秒。
    # blinds        垂直遮蔽原界面，耗时1秒。
    # squares       以平面效果转场界面，耗时1秒。
    # wipeleft      以指定方向擦除原界面。 (wiperight, wipeup, wipedown)
    # slideleft     以指定方向滑入新场景。(slideright, slideup, slidedown)
    # slideawayleft 以指定方向滑出旧场景。(slideawayright, slideawayup, slideawaydown)
    # pushright     新场景把旧场景从指定的边界推出。(pushleft, pushup, pushdown)
    # irisin        使用一个矩形iris显示新界面，或者隐藏旧界面。(irisout)
# endregion
'重新调用{i}scene{/i}则清除所有图像并显示一个背景图'
'{i}with fade{/i}表示特效为淡出'
# +-----------------------------------------------------------+
# |topleft, reset               top                   topright|
# |                                                           |
# |                                                           |
# |                                                           |
# |                                                           |
# |                          truecenter                       |
# |                                                           |
# |                                                           |
# |                                                           |
# |                                                           |
# |left                   center, default                right|
# +-----------------------------------------------------------+

'背景音乐'
play music "audio/Piano Sonata no. 11, K. 331 - I. Andante grazioso.mp3" fadeout 1.0 fadein 1.0
'fadeout and fadein分句用于旧音乐的淡出和新音乐的淡入'

show eileen at left
e concerned "在左侧显示人像"
show eileen at right with move
e concerned "移动到右侧"

define l = Character("露西", image="lucy", color='#92b3a5')
image lucy happy = "character/lucy happy.png"
image lucy mad = "character/lucy mad.png"

show lucy happy at left
l happy "增加一个角色"

l mad "对话合并    可以自定义样式"(multiple=2)
e happy "对话合并"(multiple=2)

"python语句"
"单行用{i}${\i}表示"
"如{i}$ count = 0{\i}"
$ count = 0
'使用\[{i}var{\i}\]调用变量'
"这里count = [count]"

"Ren'Py中if-else可以直接使用"

if 0:
    $ count = 0
elif -1:
    $ count = -1
else:
    $ count = 1

"count现在是: [count]"

"多行python语句"
python:
    for i in range(1,5,2):
        count += i
        print(f'count现在是: {count}')

"count现在是: [count]"

"使用多行python来读取输入"
define pov = Character("[povname]")
python:
    # python 代码块
    povname = renpy.input("你的名字是什么？", length=32)
    povname = povname.strip()

    if not povname:
        povname = "122333"

pov "我的名字是 [povname]!"

"使用manu来进行分支选择"
"关于 import 引用，以下选项中描述错误的是( )"
$ ans = 0
menu:
    'A. 使用 import numpy 引入 numpy 库':
        $ ans = 1
    'B. 可以使用 from numpy import Pi 引入 numpy 库':
        $ ans = 2
    'C. 使用 import numpy as np 引入 numpy 库，取别名为 np':
        $ ans = 3
    'D. import 保留字用于导入模块或者模块中的对象':
        $ ans = 4

if ans == 2:
    "回答正确"
else:
    "回答错误"

nvl_narrator 'NVL模式'
nvl_narrator 'NVL模式指的是一张背景图，全屏文本的模式'
nvl_narrator '适合背景介绍，旁白等'

nvl_narrator "定义NVL内角色玛丽"
define m = Character("玛丽", kind=nvl, color='#c8c8ff')
m "我是玛丽"

e 'NVL外的角色说话即离开NVL'
m 'NVL内的角色说话回到NVL'

nvl_narrator "可以使用'nvl clear'来清空屏幕"
nvl clear
nvl_narrator "现在NVL的内容清空了"

"下面介绍标签"
"标签类似面向过程编程的标签，或者内存中的跳转"
"面向过程编程中，按照自上而下的顺序逐行执行，也就是说，只有第一行命令执行之后，才可能执行第二行，第二行执行之后，才可以执行到第三行.....如此依次执行"
"使用流程跳转"
"jump语句用于将主控流程转入给定的脚本标签(label)处而call语句允许主控流程在执行完这次调用后，回到调用发生的脚本位置。"

menu:
    "尝试jump跳转标签":
        jump .a1
    
    "尝试call跳转标签":
        call .a1
# 此处为游戏结尾。
"结尾"
return </code></pre>
<p>label .a1: “这里是a1标签”</p>
<p>label .a2: “这里是a2标签” return</p>
<p>label quit: e “退出标签quit” e “若该标签存在，当用户从主菜单退出游戏时该标签内容会被调用。” “{b}{size=45}{alpha=0.7}{color=#ed556a}END{/color}{/alpha}{/size}{/b}” return</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>